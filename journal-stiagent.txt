2015-12-26

Added messages in out file for memory usage. I suspect nMC=50 is too high for memory. 
--> must try nMC = 25 (time step=2 days)


2015-12-25

Problem with Dec24th simulation: crash, but no error message is retrieved. I suspect I'm asking too much. 
Launch with timestep 4 days (instead of 2 days), just on pop A, to see ==> crash


2015-12-24

Launched long scenario (as detailed on Dec22nd) for pop A,B,C, wane @5%. When finished, do same for other wane rates.


2015-12-22

Scenario comparison with wane rate at 0.00001 retrieved. No bug any more (has it ever existed?!). Not much difference b/w wane rate 0 vs 5%... 
Next (last?) simulations must have:
- nMC = 50
- timestep = 2 days
- wane rate = 0 ; 0.05 (halflife=14yrs) ; 0.70 (halflife=1yr)


2015-12-21

Scenario comparison launched with wane rate at 0.00001. 
Work on documentation (stopped at section 7, transmission)


2015-12-20

work on documentation

Scenario comparison completed with wane rate at 0.05. 


2015-12-18
	
try to make an object that records detailed calculations of sexual activity (_rec_sexact), but too slow at execution, so gave up. Must come back to fix my slow code.

work on documentation (stopped at section 6 CSW)


2015-12-17

avant d’aller chez Hussein (dec17th@5:15pm): 
wane@5% VRE@1 (up from 0.5; 1 should be the baseline value for VRE, then do sense analysis) => OK


2015-12-16

MAY HAVE FOUND THE BUG: 
FUNCTION PARAMETER ‘displayProgress=0’ WAS MISSING IN THE LAPPLY CALL in ‘main_comp.R’ (line 72).
WHEN ADDED, CHANGING WANING RATE CHANGE COMPARISON PLOTS
… maybe not, when deleting this parameter, then comparison plots still change, which is still good, but I don’t understand what made this bug (comp plot did not change when changing wane rate) disappear


2015-12-13

(in plane): bug reproduced with minimal example: only 2 scenarios baseline and vaxmass. I suspect the “in_STI_vaccine.csv” is not read from “inputs_A” but from “inputs”. 
Test that by manually changing wane rate in the “inputs” folder (not inputs_A) 
==> No, that’s not it….

with “test.R”, differences that make sense b/w:
0: no interv
1: TP cvg@50, w@88.8
2: TP cvg@50, w@0.05
3: TP cvg@10, w@0.05
4: TP cvg@10, w@88.8 
==> that means waning rate is indeed well taken into account, the bug is not here.
==> maybe in the ‘doscencomp’ pipeline


2015-12-12

run exactly same, apart from vaccine wane rate = 0.20. Done, but results very similar —> test to see if there’s a bug —> try with very high waning rate (7.77) to see if any difference —> NO DIFFERENCE! —> BUG: wane rate not taken into account!!!


2015-12-11

run comparison A,B,C with good param (such that baseline prevalences are ok). Vaccine wane rate was 0.05. All results are saved on earnserv in ~/KEEP_shortterm/stiagent/2015-12-11. 


Iterations to find parameters to reach target baseline prevalences: 

- Baseline interventions are not well calibrated to target prevalences with 50yrs*7days:

  * pop A: HIV @ 2.5% should aim [1.5-2%] ; Tp @ 4.5% should aim 3%
	- HIV anncvgrate: from 0.275 to 0.30  ==> pref from 2.5% to 2.1%  {2.5—> -0.4}
	- Tp anncvgrate: from 0.20 to 0.25  ==> pref from 4.5% to 4.25%  {0.05 —> -0.25}
	- Tp anncvgrate: from 0.25 to 0.95  ==> pref from 4.25% to 3.6% **intervention on symptomatic only and moreover, HIV treatment makes Tp prevalence up!!
	- Tp anncvgrate: from 0.25(sympt) to 0.50(mass)  ==> pref from 4.25% to 3.4%
	- Tp anncvgrate: from 0.50(mass) to 0.80(mass)  ==> pref from 4.25% to 3.1%

What is above for pop A does not make sense anymore (too high cvg): act on risk grp proportions.
	0@65% ; 1@30% ; 2@5% ; HIV@0.32 ; Tp@0.4 ==> prev HIV= 1.1%; Tp=1.5%
	0@65% ; 1@30% ; 2@5% ; HIV@0.25 ; Tp@0.25 ==> prev HIV= 1.4%; Tp=1.6%
	0@60% ; 1@30% ; 2@10% ; HIV@0.25 ; Tp@0.25 ==> prev HIV= 2.6%; Tp=3.25%
	
0@60% ; 1@35% ; 2@5% ; HIV@0.25 ; Tp@0.25 ==> prev HIV= 1.4%; Tp=2.1%
==> OK, for pop A, new target set as prev HIV=1.5%; Tp=2%, so last param set for pop A is good. 


  * pop C: HIV @ 20.5% : OK ; Tp @ 5.25% should aim at 3%
	- Tp anncvgrate: from 0.50 to 0.60  ==> pref from 5.25% to xxx
	0@30% ; 1@50% ; 2@20% ; HIV@0.10 ; Tp@0.60 ==> prev HIV= 18.6%; Tp=4.5%
	0@35% ; 1@50% ; 2@15% ; HIV@0.10 ; Tp@0.60 ==> prev HIV= 15%; Tp=3.5%

  * pop B: HIV=10% : OK ; Tp=9.25% OK, that’s the new target!

